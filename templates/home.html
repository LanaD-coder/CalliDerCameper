{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<div class="banner text-center position-relative" style="position: relative;">
  <div class="banner-wrapper">
    <img class="banner-image" src="https://res.cloudinary.com/dvs5uituk/image/upload/v1755171713/mainpic_t14dpe.webp" alt="Grand California" />
    <div class="banner-text-card">
      <h1>Explore the Grand California</h1>
      <p>Your adventure starts here.</p>
    </div>
  </div>

  <!-- Datenschutz Toast Container -->
  <div class="toast-container position-fixed bottom-0 start-0 p-3" style="z-index: 1055;">
    <div id="cookieToast" class="toast text-black bg-white position-relative" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="false" style="min-width: 280px;">
      <button type="button" class="btn-close position-absolute top-0 start-0 m-2" style="filter: invert(0);" data-bs-dismiss="toast" aria-label="Close"></button>
      <div class="toast-body">
        Diese Website verwendet Cookies. <a href="{% url 'datenschutz' %}" class="text-decoration-underline" style="color: #ebae16;">Mehr erfahren</a>.
        <button id="acceptCookiesBtn" class="btn btn-primary btn-sm ms-2">OK</button>
      </div>
    </div>
  </div>

</div>

<section id="about-section">
  <!-- 1. Home -->
  <section id="home" class="my-5">
    <h1>{% trans "Calli entdeckt die Welt – und du kannst mit!" %}</h1>
    <p>{% trans "Miete ihn für dein Abenteuer!" %}</p>
    <p>{% trans "Calli ist mehr als nur ein Camper – er ist unser kleines Abenteuer auf vier Rädern." %}</p>
    <p>{% trans "Aber statt ihn nur selbst zu nutzen, möchten wir, dass auch andere Menschen die Freiheit des Reisens erleben können." %}</p>
    <p>{% trans "So entdeckt Calli weiter neue Orte und du findest vielleicht dein ganz eigenes Lieblingsplätzchen." %}</p>
    <a href="{% url 'booking_page' pk=1 %}" class="btn btn-lg booking-btn">
    {% trans "Jetzt buchen" %}</a>
  </section>

<div id="calliCarousel" class="carousel slide banner-wrapper" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#calliCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#calliCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#calliCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>

  <div class="carousel-inner">
    <div class="carousel-item active">
      <div class="flip-card" style="height: 400px;">
        <div class="flip-card-inner" style="height: 100%;">
          <div class="flip-card-front">
            <img src="https://res.cloudinary.com/dvs5uituk/image/upload/v1755171713/mainpic_t14dpe.webp"
                 class="d-block w-100 banner-image" alt="Campervan image 1">
          </div>
          <div class="flip-card-back">
            <h3>Campervan Details</h3>
            <p>More info or fun text here!</p>
          </div>
        </div>
      </div>
      <div class="banner-text-card visible">
        <h1>Campervan Adventures</h1>
        <p>Book your next trip with us!</p>
      </div>
    </div>

    <div class="carousel-item">
      <div class="flip-card" style="height: 400px;">
        <div class="flip-card-inner" style="height: 100%;">
          <div class="flip-card-front">
            <img src="https://res.cloudinary.com/dvs5uituk/image/upload/v1755171713/mainpic2.webp"
                 class="d-block w-100 banner-image" alt="Campervan image 2">
          </div>
          <div class="flip-card-back">
            <h3>Campervan Details</h3>
            <p>More info or fun text here!</p>
          </div>
        </div>
      </div>
      <div class="banner-text-card visible">
        <h1>Explore the Outdoors</h1>
        <p>Comfortable, safe, and ready for adventure.</p>
      </div>
    </div>

    <div class="carousel-item">
      <div class="flip-card" style="height: 400px;">
        <div class="flip-card-inner" style="height: 100%;">
          <div class="flip-card-front">
            <img src="https://res.cloudinary.com/dvs5uituk/image/upload/v1755171713/mainpic3.webp"
                 class="d-block w-100 banner-image" alt="Campervan image 3">
          </div>
          <div class="flip-card-back">
            <h3>Campervan Details</h3>
            <p>More info or fun text here!</p>
          </div>
        </div>
      </div>
      <div class="banner-text-card visible">
        <h1>Adventure Awaits</h1>
        <p>Start your journey today!</p>
      </div>
    </div>
  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#calliCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#calliCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>


  <!-- 2. Über Calli -->
  <section id="about-calli" class="container my-5">
    <h2>{% trans "Calli stellt sich vor" %}</h2>
    <p>{% trans "Schau mal hier rein! Hier erfährst du, was Calli alles an Bord hat – vom Hochbett für die Kids bis zur kleinen Küche mit Gaskocher. Alles drin für große und kleine Abenteuer." %}</p>

    <h3>{% trans "VW Grand California 600" %}</h3>

    <!-- All rows inside one .gy-4 wrapper for consistent spacing -->
    <div class="row gy-4 gx-4">

      <!-- Technische Details -->
      <div class="col-sm-6">
        <div class="card h-100 shadow-sm">
          <img src="{% static 'images/artboard2.png' %}" class="card-img-top" alt="VW California dimensions" style="object-fit: contain; max-height: 300px;" />
          <div class="card-body d-flex flex-column">
            <h4 class="card-title" style="text-decoration: underline;">{% trans "Technische Details" %}</h4>
            <p class="card-text">
              {% blocktrans %}
              This section provides key technical specifications and dimensions of the vehicle,
              offering a quick overview of its performance, size, and fuel-related details.
              {% endblocktrans %}
            </p>
            <ul class="mt-auto">
              <li>{% trans "Baujahr" %}: 2022</li>
              <li>{% trans "Leistung" %}: 177 PS</li>
              <li>{% trans "Kraftstoffart" %}: Diesel</li>
              <li>{% trans "Abgasnorm" %}: Euro 6</li>
              <li>{% trans "Kraftstoffverbrauch pro 100 km" %}: 8,5 l</li>
              <li>{% trans "Fassungsvermögen Kraftstofftank" %}: 80 l</li>
              <li>{% trans "Fahrzeugmaße (L/B/H)" %}: 599 / 204 / 309 cm</li>
              <li>{% trans "Längenangabe bei Fährbuchung" %}: 600 cm</li>
              <li>{% trans "Längenangabe bei Fährbuchung mit Fahrradträger" %}: 700 cm</li>
              <li>{% trans "Zulässiges Gesamtgewicht" %}: 3500 kg</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Fahren -->
      <div class="col-sm-6">
        <div class="card h-100 shadow-sm">
          <img src="{% static 'images/artboard1.png' %}" class="card-img-top" alt="VW California Drivers console" style="object-fit: contain; max-height: 300px;" />
          <div class="card-body d-flex flex-column">
            <h4 class="card-title" style="text-decoration: underline;">{% trans "Fahren" %}</h4>
            <p class="card-text">{% trans "Calli is equipped with a range of driving features to ensure comfort, safety, and convenience on the road." %}</p>
            <ul class="mt-auto">
              <li>{% trans "Sitzplätze für 4 Personen" %}</li>
              <li>{% trans "Automatikgetriebe" %}</li>
              <li>{% trans "Tempomat inkl. ACC (Automatische Distanzregelung)" %}</li>
              <li>{% trans "Klimaanlage" %}</li>
              <li>{% trans "Multimediasystem mit DAB+" %}</li>
              <li>{% trans "Teils Ganzjahres- & Sommerreifen" %}</li>
              <li>{% trans "Multifunktionslenkrad" %}</li>
              <li>{% trans "Parkhilfe in Front & Heck inkl. Rückfahrkamera" %}</li>
              <li>{% trans "Navigationssystem integriert" %}</li>
              <li>{% trans "Isofix" %}</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Wohnen & Schlafen -->
      <div class="col-sm-6">
        <div class="card h-100 shadow-sm">
          <img src="{% static 'images/artboard3.png' %}" class="card-img-top" alt="VW Beds" style="object-fit: contain; max-height: 250px;" />
          <div class="card-body">
            <h4 class="card-title" style="text-decoration: underline;">{% trans "Wohnen & Schlafen" %}</h4>
            <p class="card-text">{% trans "Comfortable living and sleeping arrangements to make your journey cozy and relaxing." %}</p>
            <ul>
              <li>{% trans "Schlafplätze für 2 + 2 Personen" %}</li>
              <li>{% trans "Hochbett (122 × 160 / 190 cm)" %}</li>
              <li>{% trans "Verstaubarer Innenraumtisch" %}</li>
              <li>{% trans "Toilette mit mobiler Abwasserkassette" %}</li>
              <li>{% trans "Rundum Sichtschutz (inkl. Front- & Heckscheibe)" %}</li>
              <li>{% trans "Stauraum unter Querbett" %}</li>
              <li>{% trans "5V USB, 12V & 230V Steckdosen" %}</li>
              <li>{% trans "Querbett im Heck (193 × 140 cm)" %}</li>
              <li>{% trans "Drehbare Vordersitze" %}</li>
              <li>{% trans "Nasszelle mit Dusche & WC" %}</li>
              <li>{% trans "Warmwasser-Boiler (12 l)" %}</li>
              <li>{% trans "Schranksystem mit großzügigem Stauraum" %}</li>
              <li>{% trans "Standheizung" %}</li>
              <li>{% trans "Zweite Batterie" %}</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Küche -->
      <div class="col-sm-6">
        <div class="card h-100 shadow-sm">
          <img src="{% static 'images/artboard4.png' %}" class="card-img-top" alt="VW California Kitchen" style="object-fit: contain; max-height: 250px;" />
          <div class="card-body">
            <h4 class="card-title" style="text-decoration: underline;">{% trans "Küche" %}</h4>
            <p class="card-text">{% trans "Fully equipped kitchen for preparing meals comfortably during your trip." %}</p>
            <ul>
              <li>{% trans "2-Felder-Gasherd" %}</li>
              <li>{% trans "Spülbecken" %}</li>
              <li>{% trans "Koch- & Küchengeschirr inklusive" %}</li>
              <li>{% trans "Frischwassertank (110 l) & Abwassertank (90 l)" %}</li>
              <li>{% trans "Kühlschrank (70 l) & Froster (7,5 l)" %}</li>
              <li>{% trans "Ausziehbare Küche für mehr Platz" %}</li>
              <li>{% trans "French-Press" %}</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Außenbereich -->
      <div class="col-sm-6">
        <div class="card h-100 shadow-sm">
          <img src="{% static 'images/artboard5.png' %}" class="card-img-top" alt="VW California Awning" style="object-fit: contain; max-height: 250px;" />
          <div class="card-body">
            <h4 class="card-title" style="text-decoration: underline;">{% trans "Außenbereich" %}</h4>
            <p class="card-text">{% trans "Enjoy the outdoor area with all necessary accessories for a pleasant stay outside." %}</p>
            <ul>
              <li>{% trans "Markise mit ausklappbaren Standbeinen" %}</li>
              <li>{% trans "Außensteckdose & Verlängerungskabel" %}</li>
              <li>{% trans "Campingtisch & 2 Campingstühle" %}</li>
            </ul>
          </div>
        </div>
      </div>

    </div>

    <p class="mt-4"><strong>{% trans "Besonderheiten:" %}</strong> {% trans "Haustiere sind leider nicht erlaubt." %} <i class="fa-solid fa-otter"></i></p>
  </section>

</section>

{% get_current_language as LANGUAGE_CODE %}

<!-- Welcome Toast Container -->
<div class="toast-container position-fixed bottom-0 start-0 p-3" style="z-index: 1055;">
  <div id="welcomeToast" class="toast text-black bg-white position-relative" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="5000">
    <button type="button" class="btn-close position-absolute top-0 start-0 m-2" style="filter: invert(0);" data-bs-dismiss="toast" aria-label="Close"></button>
    <div class="toast-body">
      <span>{% trans "Welcome!" %}</span>
      {% trans "Please" %}
      <a href="{% url 'account_signup' %}" class="text-decoration-underline" style="color: #ebae16;">{% trans "Register" %}</a>
      {% trans "or" %}
      <a href="{% url 'account_login' %}" class="text-decoration-underline" style="color: #ebae16;">{% trans "Login" %}</a>
      {% trans "to get started." %}
    </div>
  </div>
</div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Cookie Toast
      const cookieToastEl = document.getElementById('cookieToast');
      const acceptBtn = document.getElementById('acceptCookiesBtn');
      if (!localStorage.getItem('cookiesAccepted') && cookieToastEl && bootstrap && bootstrap.Toast) {
        const cookieToast = new bootstrap.Toast(cookieToastEl, { autohide: false });
        cookieToast.show();
        acceptBtn?.addEventListener('click', () => {
          localStorage.setItem('cookiesAccepted', 'true');
          cookieToast.hide();
        });
      }

      // Welcome Toast
      const welcomeToastEl = document.getElementById('welcomeToast');
      if (welcomeToastEl && bootstrap && bootstrap.Toast) {
        const welcomeToast = new bootstrap.Toast(welcomeToastEl);
        welcomeToast.show();
      }

      // Banner animation
      const card = document.querySelector('.banner-text-card');
      if (card) {
        const observer = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              card.classList.add('visible');
              observer.unobserve(card);
            }
          });
        }, { threshold: 0.1 });
        observer.observe(card);
      }

      // Carousel flip
      const carouselEl = document.getElementById('calliCarousel');
      if (carouselEl) {
        carouselEl.addEventListener('slide.bs.carousel', function(event) {
          const items = carouselEl.querySelectorAll('.carousel-item');

          // Flip out current slide
          const currentInner = items[event.from]?.querySelector('.flip-card-inner');
          if (currentInner) currentInner.style.transform = 'rotateY(180deg)';

          // Flip in next slide after a small delay
          setTimeout(() => {
            const nextInner = items[event.to]?.querySelector('.flip-card-inner');
            if (nextInner) nextInner.style.transform = 'rotateY(0deg)';
          }, 200);
        });
      }
    });
  </script>
{% endblock %}
